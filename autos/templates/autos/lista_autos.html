
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <link href="https://fonts.cdnfonts.com/css/race-space" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <title>Autos en venta</title>
        <style>
            body {
                background-image: url(https://i.pinimg.com/originals/3a/f2/02/3af202ccfc8a93ea71616d96a21e3b39.jpg);
                font-family: Arial, sans-serif;
                padding: 20px;
                margin: 0;
            }
    
            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
            }
    
            h1 {
                text-align: center;
                margin-bottom: 20px;
                color: #000000 !important;
                font-family: 'RACE SPACE REGULAR', sans-serif; 
                font-weight: 900;
                font-size: xx-large;
                text-decoration: underline;
                text-shadow: 
                    -1px -1px 0 #fff,  
                     1px -1px 0 #fff,
                    -1px  1px 0 #fff,
                     1px  1px 0 #fff;
                
            }
    
            ul {
                list-style-type: none;
                padding: 0;
                margin: 0;
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
            }
    
            li {
                text-align: center;
                margin: 20px;
                padding: 10px;
                border: 1px solid #bebebe;
                background-color: #525252;
                width: calc(25% - 40px); 
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                border-radius: 10px;
                transition: transform 0.2s, box-shadow 0.3s;
                animation: fadeInUp 0.8s ease-out;
            }
    
            li:hover {
                transform: translateY(-10px);
                box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            }
    
            img {
                width: 100%;
                height: 250px;
                object-fit: cover;
                border-radius: 10px 10px 0 0;
                margin-bottom: 10px;
            }
    
            .button-container {
            margin-top: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .button-container a,
        .button-container button {
            display: block;
            width: 110%;
            margin: 5px 0;
            text-decoration: none;
            background-color: #333333;
            color: #ffffff;
            border: none;
            border-radius: 8px;
            padding: 10px 0;
            transition: background-color 0.3s;
        }

        .button-container a:hover,
        .button-container button:hover {
            background-color: #818181;
        }

    
            .cart-button {
                text-align: center;
                margin-top: 20px;
            }
    
            .nav-link {
                margin-right: 10px;
                font-size: large ;
            }
    
            .navbar {
                background-color: #ac0909;
                border-radius: 15px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }
    
            .navbar-brand, .nav-link {
                color: #000000 !important;
            }
    
            #contacto{
                color: white;
                text-align: center;
            }
            
            @keyframes fadeInDown {
                0% {
                    opacity: 0;
                    transform: translateY(-50px);
                }
                100% {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
    
            @keyframes fadeInUp {
                0% {
                    opacity: 0;
                    transform: translateY(50px);
                }
                100% {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
    
            .cart-icon {
                position: relative;
            }
    
            .cart-icon .badge {
                position: absolute;
                top: -10px;
                right: -10px;
                background-color: #dc3545;
                color: #fff;
                border-radius: 50%;
                padding: 5px 10px;
                font-size: 12px;
            }

            .carousel {
            margin-top: 20px; 
        }
        .carousel-inner img {
            height: 500px; 
            object-fit: cover;
        }
        .navbar-brand {
            color: #000000 !important;
            font-family: 'RACE SPACE REGULAR', sans-serif; 
            font-weight: 900;
            font-size: xx-large;
        }
        video {
            border-radius: 15px;
        }
        .content-container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            margin-top: 20px;
        }
        .info-container {
            background-color: rgb(66, 66, 66);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(95, 95, 95, 0.1);
            max-width: 300px;
            color: white;
            
        }
        .content-reverse {
            flex-direction: row-reverse;
        }
        .rounded-video {
    border-radius: 15px; 
}
        </style>
    </head>
    <body>
        
    
    
        <nav class="navbar navbar-light bg-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="{% url 'autos' %}">Autos del Mar</a>
                <div class="d-flex">
                    <a class="nav-link d-inline" href="#contacto"><i class="fa-solid fa-phone"></i> Contacto </a>
                    {% if user.is_authenticated %}
                        <span class="nav-link d-inline"><i class="fa-regular fa-face-smile-wink"></i> Hola, {{ user.username }}</span>
                        <a class="nav-link d-inline" href="{% url 'logout' %}"><i class="fa-solid fa-right-from-bracket"></i> Cerrar Sesión</a>
                    {% else %}
                        <a class="nav-link d-inline" href="{% url 'login' %}"><i class="fa-solid fa-user"></i> Iniciar Sesión</a>
                    {% endif %}
                    <div class="cart-icon">
                        <a href="{% url 'carro:ver_carrito' %}">
                            <i class="fas fa-shopping-cart fa-2x"></i>
                            <span class="badge" id="cart-count">{{ request.session.carrito|length }}</span>
                        </a>
                    </div>
                </div>
            </div>
        </nav>
        


        <div id="carouselExampleIndicators" class="carousel slide">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3" aria-label="Slide 4"></button>
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="4" aria-label="Slide 5"></button>
              <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="5" aria-label="Slide 6"></button>

            </div>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="https://www.pixel4k.com/wp-content/uploads/2019/01/2020-ford-mustang-shelby-gt500-4k_1547937377.jpg.webp" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="https://media.porsche.com/mediakit/911gt3-rs/01-photos/03-galleries/911-992-GT3-RS-Eisgraumetallic-S-GO-5040/image-thumb__64447__mk2-modal-item/_MG_0603_highres.jpg" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="https://media.porsche.com/mediakit/911gt3-rs/01-photos/03-galleries/911-992-GT3-RS-Eisgraumetallic-S-GO-5040/image-thumb__64460__mk2-modal-item/_MG_8017_highres.jpg" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="https://media.porsche.com/mediakit/911gt3-rs/01-photos/03-galleries/911-992-GT3-RS-signalgelb/image-thumb__64595__mk2-modal-item/PANA9487_highres.jpg" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="https://media.porsche.com/mediakit/911gt3-rs/01-photos/03-galleries/911-992-GT3-RS-Indischrot-S-GO-504/image-thumb__64496__mk2-modal-item/PANA9285_1_highres.jpg" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="https://media.porsche.com/mediakit/911gt3-rs/01-photos/03-galleries/911-GT3-RS-Alle-Generationen/image-thumb__64640__mk2-modal-item/PANA9088_1.jpg" class="d-block w-100" alt="...">
              </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>

       
        <div class="container">
            {% if messages %}
                <div class="alert alert-success" role="alert">
                    {% for message in messages %}
                        <p>{{ message }}</p>
                    {% endfor %}
                </div>
            {% endif %}
            {% block content %}
            {% endblock %}
        </div>


        <div class="content-container">
            <div class="video-container">
                <video width="700" height="395" controls autoplay muted>
                    <source src="/autos/video1.mp4" type="video/mp4">
                </video>
            </div>
            <div class="info-container">
                <h3>BMW E92</h3>
                <p>The V8 engine, dubbed S65, was based on the S85 V10 used in the 2004 to 2010 E60 M5, with minor changes to improve reliability and reduce weight. It spewed out 414 horsepower at a dizzyingly high 8,400 rpm and 295 pound-feet of torque at a still-kind-of-high 3,900 rpm.</p>
            </div>
        </div>

        <div class="content-container content-reverse">
            <video width="800" height="330" controls autoplay muted>
                <source src="/autos/video2.mp4" type="video/mp4">
                Tu navegador no soporta la etiqueta de video.
            </video>
            <div class="info-container">
                <h3>JDM Cars</h3>
                <p>The term "Japanese domestic market" ("JDM") refers to Japan's home market for vehicles and vehicle parts. Japanese owners contend with a strict motor vehicle inspection and grey markets. JDM is also used as a term colloquially to refer to cars produced in Japan but sold in other countries.</p>
            </div>
        </div>



        



            <div class="container">
                <h1>Autos en venta</h1>
                <ul>
                    {% for auto in autos %}
                        <li>
                            <img src="{{ auto.imagen.url }}" alt="{{ auto.nombre }}">
                            <div class="button-container">
                                <a href="{% url 'autos:detalles_autos' auto.id %}"><h3>{{ auto.nombre }}</h3></a>
                                <form method="post" action="{% url 'carro:agregar_al_carrito' auto.id %}" class="add-to-cart-form">
                                    {% csrf_token %}
                                    <button type="submit">Agregar al Carrito</button>
                                </form>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <span class="badge" id="cart-count">{{ request.session.carrito|length }}</span>
        
            <div id="contacto" class="container mt-4 mb-4">
                <p>Derechos reservados &copy; Autos del Mar - Automotora</p>
                <p>Dirección: Calle Principal #123, Ciudad</p>
                <p>Teléfono: 123-456-7890</p>
            </div>
                  
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const forms = document.querySelectorAll('.add-to-cart-form');
                    forms.forEach(form => {
                        form.addEventListener('submit', function(event) {
                            event.preventDefault();
                            const formData = new FormData(this);
                            fetch(this.action, {
                                method: 'POST',
                                body: formData,
                                headers: {
                                    'X-Requested-With': 'XMLHttpRequest'
                                }
                            }).then(response => response.json())
                              .then(data => {
                                 console.log('Response data:', data); 
                                 if (data.success) {
                                    const cartCount = document.getElementById('cart-count');
                                    cartCount.textContent = data.cart_count;
                                      
                                      Swal.fire({
                                          title: '¡Éxito!',
                                          text: 'El auto ha sido agregado al carrito.',
                                          icon: 'success',
                                          confirmButtonText: 'Aceptar'
                                      });
                                  } else {
                                      console.error('Error en la respuesta:', data);
                                      Swal.fire({
                                          title: 'Error',
                                          text: data.message || 'Ocurrió un error al agregar el auto al carrito.',
                                          icon: 'error',
                                          confirmButtonText: 'Aceptar'
                                      });
                                  }
                              }).catch(error => {
                                  console.error('Error en el fetch:', error);
                                  Swal.fire({
                                      title: 'Error',
                                      text: 'Debe iniciar sesion para agregar el vehiculo',
                                      icon: 'error',
                                      confirmButtonText: 'Aceptar'
                                  });
                              });
                        });
                    });
                });
                </script>
    </body>
    </html>
 

